<!-- templates/registration/login.html -->
{% extends 'base.html' %}

{% load static %}

{% block page_title %}
Nuovo utente - OpenMSP - Multi Services Portal
{% endblock %}

{% block centered_container %}
{% if user.is_authenticated %}
<div class="col-10 shadow-lg white-bg p-4">
  <h2>Creazione nuovo utente</h2>

  <form method="post" novalidate>
    {% csrf_token %}
    <br />
    {{ form.non_field_errors }}
    <div class="row">
      <div class="row align-items-center form-group">
        {{ form.first_name.errors }}
        <label for="{{ form.first_name.id_for_label }}">Nome*:</label>
        {{ form.first_name }}
      </div>
    </div>

    <div class="row">
      <div class="row align-items-center form-group">
        {{ form.last_name.errors }}
        <label for="{{ form.last_name.id_for_label }}">Cognome*:</label>
        {{ form.last_name }}
      </div>
    </div>

    <div class="row">
      <div class="row align-items-center form-group">
        {{ form.username.errors }}
        <label for="{{ form.username.id_for_label }}">Username*:</label>
        {{ form.username }}
      </div>
    </div>
    <div class="row">
      <div class="row align-items-center form-group">
        {{ form.email.errors }}
        <label for="{{ form.email.id_for_label }}">Email*:</label>
        {{ form.email }}
      </div>
    </div>
    <div class="row">
      <div class="row align-items-center form-group">
        <label for="{{ form.password1.id_for_label }}">Password*:</label>
        {{ form.password1 }}
      </div>
    </div>
    <div class="row">
      <div class="row align-items-center form-group">
        <label for="{{ form.password2.id_for_label }}">Ripeti password*:</label>
        {{ form.password2 }}
      </div>
    </div>

    <div class="row form-group">
      {{ form.password1.errors }}
      {{ form.password2.errors }}
    </div>


    <div class="row">
      <div class="row align-items-center form-group">
        <div class="toggles">
          {{ form.is_active.errors }}
          <label for="{{ form.is_active.id_for_label }}">Utente attivo:<input type="checkbox" name="is_active" id="{{ form.is_active.id_for_label }}" {% if form.is_active.value %}checked{% endif %} /><span class="lever"></span></label>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="row align-items-center form-group">
        <div class="toggles">
          {{ form.is_superuser.errors }}
          <label for="{{ form.is_superuser.id_for_label }}">Utente amministratore:<input type="checkbox" name="is_superuser" id="{{ form.is_superuser.id_for_label }}"  {% if form.is_superuser.value %}checked{% endif %} /><span class="lever"></span></label>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="form-group text-end">
        <button type="submit" class="btn btn-primary" value="Register">Conferma</button>
        <a href="{% url 'impostazioni_utenti' %}" class="btn btn-danger">Annulla</a>
      </div>
    </div>
  </form>
</div>
{% else %}
<h4>Utente non loggato</h4>
<p>Per poter effettuare la registrazione di un nuovo utente devi essere amministratore</p>
<a href="{% url 'login' %}" class="btn btn-primary">
  <svg class="icon icon-sm icon-white" aria-hidden="true">
    <use href="{% static 'svg/sprites.svg' %}#it-user"></use>
  </svg>Accedi
</a>
{% endif %}
{% endblock %}
